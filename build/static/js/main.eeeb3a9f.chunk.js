(this["webpackJsonpreact-firestore-crud"]=this["webpackJsonpreact-firestore-crud"]||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(22),s=a.n(i),r=a(27),c=a(16),o=a(17),l=a(21),u=a(20),d=a(9),h=(a(49),a(50),a(25)),j=a(74),b=a(73),p=a(75),f=a(71),m=a(72),O=(a(51),a.p+"static/media/unica.7df86756.mp4"),v=a(2);var x=function(){var e=Object(n.useState)(!1),t=Object(h.a)(e,2),a=t[0],i=(t[1],Object(n.useState)({})),s=Object(h.a)(i,2),r=s[0],c=(s[1],Object(n.useState)("")),o=Object(h.a)(c,2),l=o[0],u=(o[1],Object(n.useState)(!1)),d=Object(h.a)(u,2),x=d[0],g=d[1],y=Object(n.useState)(""),T=Object(h.a)(y,2),C=T[0],k=T[1],w=Object(n.useState)(""),S=Object(h.a)(w,2),N=S[0],P=S[1],D=function(){g(!1)},I=function(e){e.preventDefault(),function(e){var t=new Headers;t.append("Content-Type","application/json"),t.append("mode","no-cors");var a=JSON.stringify({name:C,pass:N,pass_confirm:N});fetch("https://spotify-pedro.herokuapp.com/api/signup",{method:"POST",headers:t,body:a,redirect:"follow"}).then((function(e){console.log("login"),D()})).catch((function(e){return console.log("error",e)}))}()},L=function(e){e.preventDefault(),function(){var e=new Headers;e.append("Content-Type","application/json");var t=JSON.stringify({name:C,password:N});fetch("https://spotify-pedro.herokuapp.com/api/login",{method:"POST",headers:e,body:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user-token",e.token),window.location="/tutorials"})).catch((function(e){return console.log("error",e)}))}()};return Object(v.jsxs)("div",{class:"container",children:[Object(v.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,style:{position:"absolute",width:"100%",left:"50%",top:"50%",height:"100%",objectFit:"cover",transform:"translate(-50%, -50%)",zIndex:"-1"},children:Object(v.jsx)("source",{src:O,type:"video/mp4"})}),Object(v.jsxs)(j.a,{style:{width:"306px",position:"absolute",left:"40%",top:"35%"},children:[Object(v.jsxs)(j.a.Header,{children:[!a&&Object(v.jsxs)(b.a,{onSubmit:function(e){return L(e)},children:[Object(v.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(b.a.Label,{children:"Email address"}),Object(v.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",value:C,onChange:function(e){return k(e.target.value)}})]}),Object(v.jsxs)(b.a.Group,{controlId:"formBasicPassword",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",placeholder:"Password",value:N,onChange:function(e){return P(e.target.value)}})]}),Object(v.jsx)(p.a,{variant:"primary",onClick:function(){g(!0)},children:"Signup"}),Object(v.jsx)(p.a,{variant:"primary",type:"submit",children:"Login"})]}),a&&Object(v.jsx)(f.a,{src:l,roundedCircle:!0})]}),Object(v.jsxs)(m.a,{show:x,onHide:D,children:[Object(v.jsx)(m.a.Header,{closeButton:!0,children:Object(v.jsx)(m.a.Title,{children:"Signup"})}),Object(v.jsx)(m.a.Body,{children:Object(v.jsxs)(b.a,{onSubmit:function(e){return I(e)},children:[Object(v.jsxs)(b.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(b.a.Label,{children:"Email address"}),Object(v.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",value:C,onChange:function(e){return k(e.target.value)}})]}),Object(v.jsxs)(b.a.Group,{controlId:"formBasicPassword",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",placeholder:"Password",value:N,onChange:function(e){return P(e.target.value)}})]}),Object(v.jsxs)(b.a.Group,{controlId:"formBasicPassword2",children:[Object(v.jsx)(b.a.Label,{children:"Repeat Password"}),Object(v.jsx)(b.a.Control,{type:"password",placeholder:"Password"})]}),Object(v.jsx)(p.a,{variant:"primary",children:"Close"}),Object(v.jsx)(p.a,{variant:"primary",type:"submit",children:"Signup"})]})})]}),a&&Object(v.jsxs)(j.a.Body,{children:[Object(v.jsx)(j.a.Title,{children:r.name}),Object(v.jsx)(j.a.Text,{children:r.email})]})]})]})},g=a(10),y=(a(56),a(32));a(65);y.initializeApp({apiKey:"AIzaSyB7qv8LW7aU2zw_ILaxDJOQraIlzohoqts",authDomain:"project-720e4.firebaseapp.com",databaseURL:"https://project-720e4-default-rtdb.firebaseio.com",projectId:"project-720e4",storageBucket:"project-720e4.appspot.com",messagingSenderId:"282283764643",appId:"1:282283764643:web:8c7148d1aa395c5dde0816",measurementId:"G-4SHVWJL9D1"});var T=y.storage(),C=y.firestore().collection("/tutorials"),k=new(function(){function e(){Object(c.a)(this,e)}return Object(o.a)(e,[{key:"getAll",value:function(){return C}},{key:"create",value:function(e){return C.add(e)}},{key:"update",value:function(e,t){return C.doc(e).update(t)}},{key:"delete",value:function(e){return C.doc(e).delete()}}]),e}()),w=a.p+"static/media/unica.7df86756.mp4",S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(g.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(g.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(g.a)(n)),n.newTutorial=n.newTutorial.bind(Object(g.a)(n)),n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleUpload=n.handleUpload.bind(Object(g.a)(n)),n.state={title:"",description:"",published:!1,submitted:!1,file:"",name:"",fileurl:""},n}return Object(o.a)(a,[{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"saveTutorial",value:function(){var e=this,t={title:this.state.title,description:this.state.description,published:!1,fileurl:this.state.fileurl};k.create(t).then((function(){console.log("Created new item successfully!"),e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({title:"",description:"",published:!1,submitted:!1})}},{key:"handleChange",value:function(e){alert("e: "+e.target.files[0]),alert("e: "+e.target.files[0].name),this.setState({file:e.target.files[0],name:e.target.files[0].name})}},{key:"handleUpload",value:function(e){var t=this,a=this.state.name;alert("uploading..."+a),e.preventDefault(),T.ref("/images/".concat(this.state.name)).put(this.state.file).on("state_changed",console.log,console.error,(function(){T.ref("images").child(t.state.name).getDownloadURL().then((function(e){console.log(e),t.setState({fileurl:e})}))}))}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"submit-form",children:[this.state.submitted?Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"You submitted successfully!"}),Object(v.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"title",children:"Title"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:this.state.title,onChange:this.onChangeTitle,name:"title"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"description",children:"Description"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description"})]}),Object(v.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]}),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,style:{position:"absolute",width:"100%",left:"50%",top:"50%",height:"100%",objectFit:"cover",transform:"translate(-50%, -50%)",zIndex:"-1"},children:Object(v.jsx)("source",{src:w,type:"video/mp4"})}),Object(v.jsxs)("form",{onSubmit:this.handleUpload,children:[Object(v.jsx)("input",{type:"file",onChange:this.handleChange}),Object(v.jsx)("button",{children:"upload to firebase"})]}),this.state.fileurl,Object(v.jsx)("video",{autoPlay:!0,loop:!0,src:this.state.fileurl,alt:""})]})]})}}]),a}(n.Component),N=a(26),P=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(g.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(g.a)(n)),n.updatePublished=n.updatePublished.bind(Object(g.a)(n)),n.updateTutorial=n.updateTutorial.bind(Object(g.a)(n)),n.deleteTutorial=n.deleteTutorial.bind(Object(g.a)(n)),n.state={currentTutorial:{id:null,title:"",description:"",published:!1,fileurl:""},message:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({currentTutorial:this.props.tutorial})}},{key:"onChangeTitle",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(N.a)(Object(N.a)({},e.currentTutorial),{},{title:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(N.a)(Object(N.a)({},e.currentTutorial),{},{description:t})}}))}},{key:"updatePublished",value:function(e){var t=this;k.update(this.state.currentTutorial.id,{published:e}).then((function(){t.setState((function(t){return{currentTutorial:Object(N.a)(Object(N.a)({},t.currentTutorial),{},{published:e}),message:"The status was updated successfully!"}}))})).catch((function(e){console.log(e)}))}},{key:"updateTutorial",value:function(){var e=this,t={title:this.state.currentTutorial.title,description:this.state.currentTutorial.description};k.update(this.state.currentTutorial.id,t).then((function(){e.setState({message:"The Playlist was updated successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteTutorial",value:function(){var e=this;k.delete(this.state.currentTutorial.id).then((function(){e.props.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentTutorial;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Playlist"}),t?Object(v.jsxs)("div",{className:"edit-form",children:[Object(v.jsxs)("form",{children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"title",children:"Title"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"title",value:t.title,onChange:this.onChangeTitle})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"description",children:"Description"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Video:"}),t.fileurl,Object(v.jsx)("video",{autoPlay:!0,loop:!0,style:{position:"absolute",left:"117%",top:"30%",objectFit:"cover"},src:t.fileurl,alt:""})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Status:"})}),t.published?"Published":"Pending"]})]}),t.published?Object(v.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!1)},children:"UnPublish"}):Object(v.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!0)},children:"Publish"}),Object(v.jsx)("button",{className:"badge badge-danger mr-2",onClick:this.deleteTutorial,children:"Delete"}),Object(v.jsx)("button",{type:"submit",className:"badge badge-success",onClick:this.updateTutorial,children:"Update"}),Object(v.jsx)("p",{children:this.state.message})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("p",{children:"Please click on a Playlist..."})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.tutorial;return t.currentTutorial.id!==a.id?{currentTutorial:a,message:""}:t.currentTutorial}}]),a}(n.Component),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(g.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(g.a)(n)),n.onDataChange=n.onDataChange.bind(Object(g.a)(n)),n.state={tutorials:[],currentTutorial:null,currentIndex:-1},n.unsubscribe=void 0,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=k.getAll().orderBy("title","asc").onSnapshot(this.onDataChange)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.id,n=e.data();t.push({id:a,title:n.title,description:n.description,published:n.published,fileurl:n.fileurl})})),this.setState({tutorials:t})}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){var a=new Headers;a.append("x-access-token",localStorage.getItem("user-token")),a.append("Content-Type","application/json");var n=JSON.stringify({title:e.title,url:e.fileurl});fetch(" https://spotify-pedro.herokuapp.com/api/historial",{method:"POST",headers:a,body:n,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})),this.setState({currentTutorial:e,currentIndex:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tutorials,n=t.currentTutorial,i=t.currentIndex;return Object(v.jsxs)("div",{className:"list row",children:[Object(v.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,style:{position:"absolute",width:"100%",left:"50%",top:"50%",height:"100%",objectFit:"cover",transform:"translate(-50%, -50%)",zIndex:"-1"},children:Object(v.jsx)("source",{src:w,type:"video/mp4"})}),Object(v.jsxs)("div",{className:"col-md-6",children:[Object(v.jsx)("h4",{children:"Your Playlist"}),Object(v.jsx)("ul",{className:"list-group",children:a&&a.map((function(t,a){return Object(v.jsx)("li",{className:"list-group-item "+(a===i?"active":""),onClick:function(){return e.setActiveTutorial(t,a)},children:t.title},a)}))})]}),Object(v.jsx)("div",{className:"col-md-6",children:n?Object(v.jsx)(P,{tutorial:n,refreshList:this.refreshList}):Object(v.jsxs)("div",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("p",{children:"Please click on a Playlist..."})]})})]})}}]),a}(n.Component),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new Headers;t.append("Content-Type","application/json"),t.append("x-access-token",localStorage.getItem("user-token")),fetch(" https://spotify-pedro.herokuapp.com/api/historial",{headers:t,method:"GET",redirect:"follow"}).then((function(e){return e.json()})).then((function(t){e.setState({data:t.notifications}),console.log(t.notifications)})).catch((function(e){return console.log("error",e)}))}},{key:"render",value:function(){var e;return Object(v.jsxs)("div",{className:"list",children:[Object(v.jsx)("video",{autoPlay:!0,loop:!0,muted:!0,style:{position:"absolute",width:"100%",left:"50%",top:"50%",height:"100%",objectFit:"cover",transform:"translate(-50%, -50%)",zIndex:"-1"},children:Object(v.jsx)("source",{src:w,type:"video/mp4"})}),Object(v.jsx)("div",{children:null===(e=this.state.data)||void 0===e?void 0:e.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:e.title}),Object(v.jsx)("p",{children:e.url})]},e._id)}))})]})}}]),a}(n.Component),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-orange",children:[Object(v.jsx)("a",{href:"/tutorials",className:"navbar-brand",children:"Spotify"}),Object(v.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(r.b,{to:"/tutorials",className:"nav-link",children:"Playlist"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(r.b,{to:"/add",className:"nav-link",children:"Add Playlist"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(r.b,{to:"/historial",className:"nav-link",children:"Historial"})})]})]}),Object(v.jsxs)("div",{className:"container mt-3",children:[Object(v.jsx)("h2",{children:"\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800"}),Object(v.jsxs)(d.c,{children:[Object(v.jsx)(d.a,{exact:!0,path:"/",component:x}),Object(v.jsx)(d.a,{exact:!0,path:"/tutorials",component:D}),Object(v.jsx)(d.a,{exact:!0,path:"/historial",component:I}),Object(v.jsx)(d.a,{exact:!0,path:"/add",component:S})]})]})]})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(v.jsx)(r.a,{children:Object(v.jsx)(L,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.eeeb3a9f.chunk.js.map